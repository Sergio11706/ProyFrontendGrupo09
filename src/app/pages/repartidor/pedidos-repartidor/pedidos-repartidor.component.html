<div class="container mt-4">
  <h3>Pedidos disponibles para entregar</h3>

  <div *ngFor="let pedido of pedidos, let i = index" class="card my-3 shadow-sm">
    <ng-container *ngIf="pedido.estado === 'listo' || repartidores[i]._id === repartidorId">
    <div class="card-body">
      <h5 class="card-title">üìç Direcci√≥n: </h5>
      <p> <strong>Barrio:</strong> {{ clientes[i].barrio }}</p>
      <p> <strong>Calle:</strong> {{ clientes[i].calle }}</p>
      <p> <strong>N√∫mero:</strong> {{ clientes[i].numeroCalle }}</p>
      <p> <strong>Estado:</strong> {{ pedido.estado }}</p>
      
      <h5 class="card-title"> Cliente: {{ clientes[i].nombre }} {{ clientes[i].apellido }}</h5>
      <p> <strong>Tel√©fono:</strong> {{ clientes[i].telefono }}</p>
      <p> <strong>Orden:</strong> {{ pedido.nombre }}</p>

      <!-- Total final -->
      <p class="mt-3"><strong>Total:</strong> ${{ pedido.total!.toFixed(2) }}</p>
      <p><strong>Propina Estimada:</strong> ${{ (pedido.total! * 0.15).toFixed(2) }}</p>

      <div *ngIf="!pedido.repartidor">
        <button class="btn btn-success" (click)="tomarPedido(i)">Tomar pedido</button>
      </div>

      <div *ngIf="repartidores[i]._id === repartidorId">
        <button class="btn btn-danger" (click)="finalizarPedido(pedido._id)">Finalizar</button>
      </div>
    </div>
    </ng-container>
  </div>
</div>
